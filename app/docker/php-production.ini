; Optimized PHP configuration for 512MB RAM VMs
; This configuration reduces memory usage while maintaining reasonable performance

; === Memory Limits ===
memory_limit = 96M              ; Limit per PHP process (was default 128M)
post_max_size = 8M              ; Max POST size
upload_max_filesize = 8M        ; Max upload size

; === OPcache (CRITICAL for performance) ===
opcache.enable = 1
opcache.enable_cli = 0
opcache.memory_consumption = 32  ; Only 32MB for opcache
opcache.interned_strings_buffer = 4
opcache.max_accelerated_files = 3000
opcache.revalidate_freq = 60    ; Check for changes every 60s
opcache.fast_shutdown = 1
opcache.validate_timestamps = 1  ; Set to 0 in production if you never change code

; === Performance Tuning ===
realpath_cache_size = 256K      ; Reduce from default 4M
realpath_cache_ttl = 600        ; Cache for 10 minutes

; === Disable Unused Extensions ===
expose_php = Off
max_execution_time = 30
max_input_time = 30
default_socket_timeout = 30

; === Session Settings ===
session.gc_maxlifetime = 1440
session.gc_probability = 1
session.gc_divisor = 100
